# Versión simplificada para pruebas
RewriteEngine On

# Log de rewrite para debugging (si tienes acceso a logs)
# RewriteLog /tmp/rewrite.log
# RewriteLogLevel 3

# Página principal
RewriteRule ^$ frontend/index.php [L]

# ===== ADMIN =====
# Redireccionar /admin a /admin/
RewriteRule ^admin$ admin/ [R=301,L]

# Admin principal
RewriteRule ^admin/$ backend/admin/index.php [L]

# Recursos CSS y JS del admin (ANTES de las páginas)
RewriteRule ^admin/css/(.+)$ backend/admin/css/$1 [L]
RewriteRule ^admin/js/(.+)$ backend/admin/js/$1 [L]

# Páginas del admin
RewriteRule ^admin/productos$ backend/admin/productos.php [L]
RewriteRule ^admin/categorias$ backend/admin/categorias.php [L]
RewriteRule ^admin/usuarios$ backend/admin/usuarios.php [L]
RewriteRule ^admin/pedidos$ backend/admin/pedidos.php [L]

# ===== FRONTEND =====
# Páginas del frontend
RewriteRule ^productos$ frontend/productos.php [L]
RewriteRule ^login$ frontend/login.php [L]
RewriteRule ^registro$ frontend/registro.php [L]
RewriteRule ^carrito$ frontend/carrito.php [L]
RewriteRule ^checkout$ frontend/checkout.php [L]
RewriteRule ^perfil$ frontend/perfil.php [L]
RewriteRule ^pedidos$ frontend/pedidos.php [L]
RewriteRule ^direcciones$ frontend/direcciones.php [L]
RewriteRule ^nosotros$ frontend/nosotros.php [L]

# Recursos del frontend
RewriteRule ^css/(.+)$ frontend/css/$1 [L]
RewriteRule ^js/(.+)$ frontend/js/$1 [L]
RewriteRule ^images/(.+)$ frontend/images/$1 [L]

# Condición para no reescribir archivos que existen físicamente
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

# Regla catch-all para otras páginas del frontend
RewriteRule ^([^/]+)/?$ frontend/$1.php [L]